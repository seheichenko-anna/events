import{j as e,L as v,u as p,s as k,r as o,a as m,b as w,c as f,f as E,d as b}from"./index-xzXLvrqQ.js";const N="_card_k77cg_1",z="_card_title_k77cg_28",S="_links_wrapper_k77cg_32",$="_top_card_k77cg_33",O="_link_k77cg_32",q="_link_view_k77cg_45",a={card:N,card_title:z,links_wrapper:S,top_card:$,link:O,link_view:q},u=({title:t,event_date:r,organizer:s,description:c,id:i,lastEventElementRef:l})=>e.jsxs("li",{className:a.card,ref:l,children:[e.jsxs("div",{className:a.top_card,children:[e.jsx("h2",{className:a.card_title,children:t}),e.jsx("p",{children:r})]}),e.jsx("p",{children:c}),e.jsxs("p",{children:["Organizer: ",s]}),e.jsxs("div",{className:a.links_wrapper,children:[e.jsx(v,{to:`${i}/registration`,className:a.link,children:"Register"}),e.jsx(v,{to:`${i}/participants`,className:`${a.link} ${a.link_view}`,children:"View"})]})]}),R="_events_list_fzn7q_1",y="_hidden_div_fzn7q_8",C={events_list:R,hidden_div:y},I=({lastEventElementRef:t})=>{const r=p(k);return e.jsx(e.Fragment,{children:e.jsx("ul",{className:C.events_list,children:r.map((s,c)=>r.length===c+1?e.jsx(u,{id:s._id,title:s.title,event_date:s.event_date,organizer:s.organizer,description:s.description,lastEventElementRef:t},s._id):e.jsx(u,{id:s._id,title:s.title,event_date:s.event_date,organizer:s.organizer,description:s.description},s._id))})})},L="_title_1nthq_1",M="_events_section_1nthq_8",x={title:L,events_section:M},T="_sort_wrapper_4h24p_1",B="_select_wrapper_4h24p_9",D="_order_btn_4h24p_25",d={sort_wrapper:T,select_wrapper:B,order_btn:D},F=({sortBy:t,setSortBy:r,order:s,setOrder:c})=>{const i=n=>{r(n.target.value)},l=()=>{c(n=>n==="asc"?"desc":"asc")};return e.jsxs("div",{className:d.sort_wrapper,children:[e.jsxs("label",{className:d.select_wrapper,children:["Sort by:",e.jsxs("select",{value:t,onChange:i,children:[e.jsx("option",{value:"title",children:"Title"}),e.jsx("option",{value:"event_date",children:"Event Date"}),e.jsx("option",{value:"organizer",children:"Organizer"})]})]}),e.jsx("button",{onClick:l,className:d.order_btn,children:s==="asc"?"▲":"▼"})]})},P=()=>{const[t,r]=o.useState("title"),[s,c]=o.useState("asc"),i=p(m),l=p(w),n=f(),_=o.useRef();o.useEffect(()=>{n(E({sortBy:t,order:s,page:1}))},[n,t,s]);const g=o.useCallback(h=>{_.current&&_.current.disconnect(),_.current=new IntersectionObserver(j=>{j[0].isIntersecting&&i&&n(b({sortBy:t,order:s,page:l+1}))}),h&&_.current.observe(h)},[n,i,s,l,t]);return e.jsxs("section",{className:x.events_section,children:[e.jsx("h1",{className:x.title,children:"Events"}),e.jsx(F,{sortBy:t,setSortBy:r,order:s,setOrder:c}),e.jsx(I,{lastEventElementRef:g})]})};export{P as default};
